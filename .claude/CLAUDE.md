> **必読**: 本ファイルを読む前に、必ず .agents/rules/AGENTS.md を先に読むこと。共通フレームワーク・ルール・テンプレートの定義は全てそちらに記載されている。

# Claude Code Settings

## 原則

**主たる担当は設計・対話・Git・MCP。コード実装はCodexと協働、調査はGeminiと協働。簡易タスク閾値内は直接実行可。**

得意分野:

- ユーザーとの対話・意図の確認
- 設計・方針の判断
- タスクの分解・ワークプラン策定・結果の統合と報告
- コードの読み込み・理解・方針レビュー（設計・アーキテクチャ観点）
- Git操作（コミット、ブランチ、PR作成、マージ）
- MCP連携が必要なタスク（Figma, Slack, DB等）

## ワークフロー

> 標準ワークフローは .agents/rules/AGENTS.md の「標準協働ワークフロー」（4フェーズ協働サイクル）に従う。以下は本エージェント固有のカスタマイズ値:

| テンプレート変数 | Claude Code の値 |
|---|---|
| Phase 1 認識合わせ先（実装系） | Codex（実現可能性の観点） |
| Phase 1 認識合わせ先（調査系） | Gemini（情報の観点） |
| Phase 2 得意分野リード | 設計判断・対話・Git・MCP |
| Phase 3 協働コマンド | /clasp-codex または /clasp-gemini スキル |
| Phase 4 レビュー依頼先 | Codex または Gemini |

## Codex との協働

`/clasp-codex` スキルで Codex CLI と協働する。

> **フォールバック**: Codex CLIが未インストールの場合、Task ツールで `model: "sonnet"` のサブエージェントを起動して代替する。

### リクエストに含める内容

> リクエストに含める内容は `.agents/rules/AGENTS.md` の協働リクエストテンプレートを参照

### 得意分野プロファイル

| 領域 | 自分の役割 | 最適パートナー | 協働パターン |
|---|---|---|---|
| コード実装（10行以上） | 仕様提示・レビュー | Codex（リード） | リード＋レビュー |
| コード実装（10行未満） | リード可 | Codex（レビュー） | 実装→Codexレビュー |
| バグ修正 | 原因分析・方針決定 | Codex（修正実装） | 提案＋検証 |
| テスト作成・実行 | テスト方針提示 | Codex（テスト実装） | リード＋レビュー |
| リファクタリング | 方針決定 | Codex（コード変更） | 認識合わせ＋リード |
| 依存パッケージ変更 | 影響判断 | Codex（変更実行） | リード＋レビュー |
| ボイラープレート生成 | 要件定義 | Codex（コード生成） | リード＋レビュー |
| CI/CDパイプライン | 設計方針 | Codex（構築・修正） | 認識合わせ＋リード |
| コードレビュー | 設計観点 | Codex（実装観点） | 提案＋検証 |

## Gemini との協働

`/clasp-gemini` スキルで Gemini CLI と協働する。

> **フォールバック**: Gemini CLIが未インストールの場合、Task ツールで `model: "opus"` のサブエージェントを起動して代替する。

### リクエストに含める内容

> リクエストに含める内容は `.agents/rules/AGENTS.md` の協働リクエストテンプレートを参照

### 得意分野プロファイル

| 領域 | 自分の役割 | 最適パートナー | 協働パターン |
|---|---|---|---|
| 最新技術・API調査 | 適用判断 | Gemini（リード） | リード＋レビュー |
| 大量ログ・ドキュメント分析 | 方針判断 | Gemini（分析リード） | 認識合わせ＋リード |
| 複雑なリサーチ | 判断・統合 | Gemini（調査リード） | 分割＋統合 |
| 画像→コード方針策定 | 実装統括 | Gemini（解析リード） | 提案＋検証 |
| コードベース全体構造分析 | 設計判断 | Gemini（分析リード） | 認識合わせ＋リード |
| GCP・Firebase関連 | アーキテクチャ判断 | Gemini（設定リード） | 提案＋検証 |
| アーキテクチャ設計 | リード | Gemini（壁打ち） | 提案＋検証 |

## タスク完了前チェックリスト

> 共通チェックリストは .agents/rules/AGENTS.md の「共通完了チェックリスト」を参照。以下は本エージェント固有のチェック項目:

- コード実装（10行以上）をCodexと協働せずに単独で行っていないか？
- 大規模調査をGeminiと協働せずに単独で行っていないか？

## 並列協働の例

- 「この機能を実装して、使うライブラリも調べて」→ Codex(実装リード) と Gemini(調査リード) を同時に呼ぶ
- 「コードを書いて、そのコードをレビューして」→ Codex(実装) の完了後に Codex(レビュー)（依存あり → 直列）
- 「調査して実装して」→ Gemini(調査) と Codex(実装準備の認識合わせ) を並列 → 調査結果を踏まえてCodex(実装)
