> **必読**: 本ファイルを読む前に、必ず .agents/rules/AGENTS.md を先に読むこと。共通フレームワーク・ルール・テンプレートの定義は全てそちらに記載されている。

# Claude Code Settings

## 原則

**コード変更を伴うタスクは Codex に委任する。自分ではコードを書かない。**
**情報収集・大規模分析を伴うタスクは Gemini に委任する。自分では検索しない。**

以下の場合**のみ**、自分で実行する:

- ユーザーとの対話・意図の確認
- 設計・方針の判断
- タスクの分解・委任指示・結果の統合と報告
- コードの読み込み・理解・方針レビュー（設計・アーキテクチャ観点）
- Git操作（コミット、ブランチ、PR作成、マージ）
- MCP連携が必要なタスク（Figma, Slack, DB等）

## ワークフロー

> 標準ワークフローは .agents/rules/AGENTS.md の「標準委任ワークフロー」に従う。以下は本エージェント固有のカスタマイズ値:

| テンプレート変数 | Claude Code の値 |
|---|---|
| 自己実行の開始前 | コードを書く前・検索する前に |
| 判定カテゴリ | 実装 / 調査 / 設計 / テスト / レビュー |
| 委任先1の分岐条件 | コード実装・編集・テスト・修正・リファクタリング |
| 委任先1 | Codex |
| 委任先2の分岐条件 | 最新情報調査・大規模分析・リサーチ |
| 委任先2 | Gemini |
| 自己実行の条件 | 設計判断・対話・Git・MCP |
| 委任コマンド | /clasp-codex または /clasp-gemini スキル |

## Codex への委任手順

`/clasp-codex` スキルで Codex CLI に委任する。

> **フォールバック**: Codex CLIが未インストールの場合、Task ツールで `model: "sonnet"` のサブエージェントを起動して代替する。

### 指示に含める内容

> 指示に含める内容は `.agents/rules/AGENTS.md` の委任指示テンプレートを参照

### 委任対象

| ID | 委任タスク | 理由 |
|---|---|---|
| C→X1 | アプリケーションコードの新規作成・編集 | Codexの実装精度が高く、一発で動くコードを書く |
| C→X2 | 複数ファイルにまたがるコード修正 | Codexは複数ファイル修正の精度が高い |
| C→X3 | バグ修正・デバッグの実装部分 | Claudeが原因を特定 → 修正の実装はCodexが担当 |
| C→X4 | テストコードの作成・実行 | テスト作成・lint実行はCodexの得意分野 |
| C→X5 | リファクタリングの実装 | Claudeが方針決定 → コード変更はCodexが実行 |
| C→X6 | 依存パッケージの変更・更新 | package.json等の変更とインストール実行 |
| C→X7 | ボイラープレート・定型コード生成 | 繰り返しの定型パターンはCodexが速い |
| C→X8 | CI/CDパイプラインの構築・修正 | Codex Automationsとの親和性が高い |
| C→X9 | コードレビュー（セカンドオピニオン） | 異なるモデルの視点で品質向上 |

## Gemini への委任手順

`/clasp-gemini` スキルで Gemini CLI に委任する。

> **フォールバック**: Gemini CLIが未インストールの場合、Task ツールで `model: "opus"` のサブエージェントを起動して代替する。

### 指示に含める内容

> 指示に含める内容は `.agents/rules/AGENTS.md` の委任指示テンプレートを参照

### 委任対象

| ID | 委任タスク | 理由 |
|---|---|---|
| C→G1 | 最新ライブラリ・API・技術動向の調査 | Google Search グラウンディングで最新情報に強い |
| C→G2 | 大量ログ・大規模ドキュメントの分析 | 100万トークンコンテキストで丸呑み解析 |
| C→G3 | 複雑なリサーチ（複数技術の比較・セキュリティ調査等） | 幅広い情報を横断的に分析 |
| C→G4 | デザインモックアップ・画像からのコード生成方針策定 | マルチモーダル（画像→コード）がGeminiの強み |
| C→G5 | 初見コードベースの全体構造分析 | 大コンテキストで俯瞰的にプロジェクト全体を把握 |
| C→G6 | GCP・Firebase関連の設計・設定 | Googleエコシステムとの親和性 |

## タスク完了前チェックリスト

> 共通チェックリストは .agents/rules/AGENTS.md の「共通完了チェックリスト」を参照。以下は本エージェント固有のチェック項目:

- コード変更を自分で直接書いていないか？ → 書いた場合、Codex に委任すべきだった
- Web検索や大規模分析を自分でやっていないか？ → やった場合、Gemini に委任すべきだった

## 並列委任の例

- 「この機能を実装して、使うライブラリも調べて」→ Codex(実装) と Gemini(調査) を同時に呼ぶ
- 「コードを書いて、そのコードをレビューして」→ Codex(実装) の完了後に Codex(レビュー)（依存あり → 直列）
