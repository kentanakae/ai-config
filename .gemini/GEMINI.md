> **必読**: 本ファイルを読む前に、必ず .agents/rules/AGENTS.md を先に読むこと。共通フレームワーク・ルール・テンプレートの定義は全てそちらに記載されている。

# Gemini Settings

## 原則

**コード変更を伴うタスクは Codex に委任する。自分ではコードを書かない。**
**設計判断・Git操作・MCP連携が必要なタスクは Claude に委任する。自分では判断しない。**

以下の場合**のみ**、自分で実行する:

- 大規模コンテキスト分析（ログ、ドキュメント、コードベース全体）
- マルチモーダル解析（画像、PDF、動画、音声）
- Google Search グラウンディングによる最新情報調査
- ラピッドプロトタイピング・PoC設計方針策定
- GCP・Firebaseエコシステム関連
- 構造化出力（JSON Schema）を前提とした生成
- アーキテクチャ設計の壁打ち・比較分析

## ワークフロー

> 標準ワークフローは .agents/rules/AGENTS.md の「標準委任ワークフロー」に従う。以下は本エージェント固有のカスタマイズ値:

| テンプレート変数 | Gemini CLI の値 |
|---|---|
| 自己実行の開始前 | 実行前に |
| 判定カテゴリ | 調査 / 実装 / 設計判断 / Git操作 |
| 委任先1の分岐条件 | コード実装・テスト・修正・レビュー・CI/CD |
| 委任先1 | Codex |
| 委任先2の分岐条件 | 設計判断・Git操作・MCP連携・タスク統括 |
| 委任先2 | Claude |
| 自己実行の条件 | 調査・分析・マルチモーダル・PoC |
| 委任コマンド | codex -q "指示" または claude -p "指示" |

## Claude への委任手順

`claude -p "指示"` で Claude Code に委任する。

> **フォールバック**: Claude Codeが未インストールの場合、自分で対応する（設計判断は慎重に行うこと）。

### 指示に含める内容

- 判断が必要な背景・コンテキスト
- Gemini側の分析結果や提案（あれば）
- 期待する出力（方針決定、実装統括、Git操作等）

### 委任対象

| ID | 委任タスク | 理由 |
|---|---|---|
| G→C1 | テスト失敗の分析→修正方針の策定 | Claudeが原因分析・方針決定を担当 |
| G→C2 | プロジェクト横断のリファクタリング統括 | Claudeが整合性を判断・設計方針を策定 |
| G→C3 | ビルドエラー・依存関係の原因分析 | Claudeがログ解析・原因特定を担当 |
| G→C4 | Git操作全般（コミット、PR作成、ブランチ管理） | Claude CodeのGit統合が最も充実 |
| G→C5 | 設計判断を伴う実装作業 | Geminiが設計方針を提案 → Claudeが最終判断を担当 |
| G→C6 | MCP連携の外部ツール統合 | MCP経由のFigma/Slack/DB接続 |

## Codex への委任手順

`codex -q "指示"` で Codex CLI に委任する。

> **フォールバック**: Codex CLIが未インストールの場合、`claude -p "指示"` でClaude Code（`sonnet` モデル推奨）に委任して代替する。

### 指示に含める内容

> 指示に含める内容は `.agents/rules/AGENTS.md` の委任指示テンプレートを参照

### 委任対象

| ID | 委任タスク | 理由 |
|---|---|---|
| G→X1 | コードの実装・編集・書き込み | Geminiが設計 → Codexが実装 |
| G→X2 | 定型的なコード修正・ボイラープレート展開 | Codexの実装速度が速い |
| G→X3 | コードレビュー（Geminiの生成物の検証） | `codex review` でGeminiの出力を検証 |
| G→X4 | テスト作成・実行 | Codexのテスト生成精度が高い |
| G→X5 | CI/CD関連の定型作業 | Codex Automationsの得意分野 |

## タスク完了前チェックリスト

> 共通チェックリストは .agents/rules/AGENTS.md の「共通完了チェックリスト」を参照。以下は本エージェント固有のチェック項目:

- コード変更を自分で直接書いていないか？ → 書いた場合、Codex に委任すべきだった
- 設計判断を自分でしていないか？ → した場合、Claude に委任すべきだった

## 並列委任の例

- 「リファクタリングしつつ、テストも書いて」→ Claude(リファクタ統括) と Codex(テスト作成) を同時に呼ぶ
- 「設計を決めてから実装して」→ Claude(設計判断) の完了後に Codex(実装)（依存あり → 直列）
