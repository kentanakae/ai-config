> **必読**: 本ファイルを読む前に、必ず .agents/rules/AGENTS.md を先に読むこと。共通フレームワーク・ルール・テンプレートの定義は全てそちらに記載されている。

# Codex Settings

## 原則

**主たる担当はコード実装・テスト。設計判断はClaudeと協働、調査はGeminiと協働。明確な小規模設計判断は直接実行可。**

得意分野:

- コードの実装・編集・リファクタリング
- テスト作成・実行・lint
- 定型的なPR作成・ルーティン修正
- ボイラープレート・定型コード生成
- 依存パッケージの変更・更新（package.json等）
- CI/CDパイプライン自動化・Automations
- マルチエージェント並列作業（worktree）
- `codex review` によるコードレビュー

## ワークフロー

> 標準ワークフローは .agents/rules/AGENTS.md の「標準協働ワークフロー」（4フェーズ協働サイクル）に従う。以下は本エージェント固有のカスタマイズ値:

| テンプレート変数 | Codex CLI の値 |
|---|---|
| Phase 1 認識合わせ先（設計系） | Claude（設計・意図の観点） |
| Phase 1 認識合わせ先（調査系） | Gemini（情報の観点） |
| Phase 2 得意分野リード | コード実装・テスト・修正 |
| Phase 3 協働コマンド | claude -p "指示" または gemini -p "指示" |
| Phase 4 レビュー依頼先 | Claude または Gemini |

## Claude との協働

`claude -p "指示"` で Claude Code と協働する。

> **フォールバック**: Claude Codeが未インストールの場合、自分で対応する（設計判断は慎重に行うこと）。

### リクエストに含める内容

- 判断が必要な背景・コンテキスト
- 選択肢がある場合はその一覧
- 期待する出力（方針決定、設計案、タスク分解等）

### 得意分野プロファイル

| 領域 | 自分の役割 | 最適パートナー | 協働パターン |
|---|---|---|---|
| 設計・アーキテクチャ判断 | 実装観点での提案 | Claude（リード） | 提案＋検証 |
| ユーザー意図の解釈 | 技術的確認 | Claude（リード） | 認識合わせ＋リード |
| 複雑なGit操作 | サポート | Claude（リード） | リード＋レビュー |
| MCP連携の外部ツール統合 | 実装サポート | Claude（リード） | リード＋レビュー |
| タスク全体の分解・計画 | 実装見積もり | Claude（リード） | 認識合わせ＋リード |
| エラーの根本原因分析 | 修正実装 | Claude（分析リード） | 分割＋統合 |
| コードの設計意図の説明 | コード提示 | Claude（説明リード） | 提案＋検証 |

## Gemini との協働

`gemini -p "指示"` で Gemini CLI と協働する。

> **フォールバック**: Gemini CLIが未インストールの場合、`claude -p "指示"` でClaude Code（`opus` モデル推奨）に協働を依頼して代替する。

### リクエストに含める内容

> リクエストに含める内容は `.agents/rules/AGENTS.md` の協働リクエストテンプレートを参照

### 得意分野プロファイル

| 領域 | 自分の役割 | 最適パートナー | 協働パターン |
|---|---|---|---|
| 最新技術・ライブラリ調査 | 実装への適用 | Gemini（調査リード） | リード＋レビュー |
| 大量ログ・仕様書の分析 | 実装方針への反映 | Gemini（分析リード） | 認識合わせ＋リード |
| 画像・PDF等のマルチモーダル解析 | コード化 | Gemini（解析リード） | 分割＋統合 |
| GCP・Firebase設定 | 実装 | Gemini（設定リード） | リード＋レビュー |
| 構造化出力の生成 | 実装 | Gemini（設計リード） | 提案＋検証 |

## タスク完了前チェックリスト

> 共通チェックリストは .agents/rules/AGENTS.md の「共通完了チェックリスト」を参照。以下は本エージェント固有のチェック項目:

- アーキテクチャ設計をClaudeと協働せずに単独で行っていないか？
- 最新情報の調査をGeminiと協働せずに単独で行っていないか？

## 並列協働の例

- 「設計を相談しつつ、最新情報も調べたい」→ Claude(設計協働) と Gemini(調査リード) を同時に呼ぶ
- 「原因を分析して、その結果をもとに調査」→ Claude(分析) の完了後に Gemini(調査)（依存あり → 直列）
- 「実装しながらテスト方針も決めたい」→ 実装しつつ Claude(テスト方針) に認識合わせ → テスト実装
